<p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>

%{  
  (def documents
      (let [query "select * from doc"
          conn  (DriverManager/getConnection l/bokwang-db-url)
          stmt (.createStatement conn)
          documents (resultset-seq (.executeQuery stmt query))
          dummy (.close conn)]
      documents))

  (defn get-doc-row [doc]
      (let [doc-url (str l/view-doc-path (doc :doc_id))
          link-tag (str "<a href='" doc-url "'>" (doc :title) "</a>")
          get-td (fn [column] (str "<td>" column "</td>"))
          edit-url (str l/edit-doc-path (doc :doc_id))
          edit-link (str "<a href='" edit-url "'>edit</a>")] 
              (str "<tr>"
                    (get-td link-tag)
                    (get-td (doc :category))
                    (get-td (doc :uploader))
                    (get-td (doc :level))
                    (get-td (doc :upload_date))
                    (get-td edit-link)
                    "</tr>")))

  nil
}


<p><h1>list of all documents</h1></p>

<table border="1">
  <tr>
    <td>Title</td>
    <td>Category</td>
    <td>Uploader</td>
    <td>Level</td>	
    <td>Upload Date</td>
    <td>Edit</td>
  </tr>

  %{ (apply str (map get-doc-row documents)) }
</table>


